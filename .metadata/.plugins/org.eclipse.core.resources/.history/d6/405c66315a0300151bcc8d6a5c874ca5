package action;

import java.util.ArrayList;

import model.JobDetail;

import org.apache.struts2.ServletActionContext;

import serviceImp.IJobDetailService;
import tool.ResultUtil;

public class UpdateWorkerNumAction {

	private String jobid;
	private String num;
	private ArrayList jobdateidarr;
	private ArrayList jobdatenumarr;
	private IJobDetailService jobDetailService;

	public ArrayList getJobdateidarr() {
		return jobdateidarr;
	}

	public void setJobdateidarr(ArrayList jobdateidarr) {
		this.jobdateidarr = jobdateidarr;
	}

	public ArrayList getJobdatenumarr() {
		return jobdatenumarr;
	}

	public void setJobdatenumarr(ArrayList jobdatenumarr) {
		this.jobdatenumarr = jobdatenumarr;
	}

	public String getJobid() {
		return jobid;
	}

	public void setJobid(String jobid) {
		this.jobid = jobid;
	}

	public String getNum() {
		return num;
	}

	public void setNum(String num) {
		this.num = num;
	}

	public IJobDetailService getJobDetailService() {
		return jobDetailService;
	}

	public void setJobDetailService(IJobDetailService jobDetailService) {
		this.jobDetailService = jobDetailService;
	}

	public String execute() {
		System.out.println(jobdateidarr);
		System.out.println(jobdatenumarr);
		JobDetail job = jobDetailService.getJobDetailById(Long.parseLong(jobid));
		if (job.getWorktimetype() == 1) {
			job.setNum(Integer.parseInt(num));
			jobDetailService.updateJob(job);
			System.out.println("11111");
		} else {
			System.out.println("22222");
			for (int i = 0; i < jobdateidarr.size(); ++i) {
				String id = (String) jobdateidarr.get(i);
				String num = (String) jobdatenumarr.get(i);
				System.out.println(id);
				System.out.println(num);
				jobDetailService.updateJobDate(Long.parseLong(id),
						Integer.parseInt(num));
			}
		}

		ResultUtil.returnJsonWithCode200(ServletActionContext.getResponse(),
				null, "ÐÞ¸Ä³É¹¦£¡");

		return null;
	}

}
